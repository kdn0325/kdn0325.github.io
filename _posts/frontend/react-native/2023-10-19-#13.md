---
title: "[React Native] Firebase Push ì•Œë¦¼ êµ¬í˜„ í•˜ê¸° [ios]"

categories: frontend
tags:
  - React-Native
  - Firebase
  - Push Notifications
  - Push ì•Œë¦¼ êµ¬í˜„
  - APN
  - iOS í‘¸ì‹œë©”ì‹œì§€
  - Firebase SDK

date: 2023-10-19
last_modified_at: 2023-10-19
---

---

## ğŸ”¥ 1. Firebase í”„ë¡œì íŠ¸ ìƒì„±

(https://console.firebase.google.com/u/0/?hl=ko)

```bash
npm i @react-native-firebase/analytics @react-native-firebase/app @react-native-firebase/messaging

npm i react-native-push-notification @react-native-community/push-notification-ios

npm i -D @types/react-native-push-notification

npx pod-install
```

## ğŸ”¥ 2. iOS í”„ë¡œì íŠ¸ ì¶”ê°€

### 2-1 êµ¬ì„± íŒŒì¼ ë‹¤ìš´ë¡œë“œ

- GoogleService-Info.plist íŒŒì¼ ì €ì¥

### 2-2 Firebase SDK ì¶”ê°€

- GoogleService-Info.plist ë¡œì»¬ì— íŒŒì¼ ì €ì¥

### 2-3 ì´ˆê¸°í™” ì½”ë“œ ì¶”ê°€í•˜ê¸°

AppDelegate.h

```objectivec
#import <RCTAppDelegate.h>
#import <UIKit/UIKit.h>
#import <UserNotifications/UNUserNotificationCenter.h>

//ìˆ˜ì •
**@interface** AppDelegate : RCTAppDelegate <UNUserNotificationCenterDelegate>
**@end**
```

AppDelegate.mm

```objectivec
#import "AppDelegate.h"
#import <React/RCTBundleURLProvider.h>
//ìŠ¤í”Œë˜ì‹œ
#import "RNSplashScreen.h"
//FireBase
#import <Firebase.h>
//Push ì•Œë¦¼
#import <UserNotifications/UserNotifications.h>
#import <RNCPushNotificationIOS.h>
//ì½”ë“œ í‘¸ì‹œ
#import <CodePush/CodePush.h>
//Appcenter
#import <AppCenterReactNative.h>
#import <AppCenterReactNativeAnalytics.h>
#import <AppCenterReactNativeCrashes.h>

@implementation AppDelegate

// ë“±ë¡ ì´ë²¤íŠ¸ì— í•„ìš”í•©ë‹ˆë‹¤.
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
 [RNCPushNotificationIOS didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];
}

// ì•Œë¦¼ ì´ë²¤íŠ¸ì— í•„ìš”í•©ë‹ˆë‹¤. ì›ê²© ì•Œë¦¼ ì²˜ë¦¬ í›„ ë°˜ë“œì‹œ ì™„ë£Œ í•¸ë“¤ëŸ¬ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler
{
  [RNCPushNotificationIOS didReceiveRemoteNotification:userInfo fetchCompletionHandler:completionHandler];
}

// ë“±ë¡ ì˜¤ë¥˜ ì´ë²¤íŠ¸ì— í•„ìš”í•©ë‹ˆë‹¤.
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error
{
 [RNCPushNotificationIOS didFailToRegisterForRemoteNotificationsWithError:error];
}

// ë¡œì»¬ ì•Œë¦¼ ì´ë²¤íŠ¸ì— í•„ìš”í•©ë‹ˆë‹¤.
- (void)userNotificationCenter:(UNUserNotificationCenter *)center
didReceiveNotificationResponse:(UNNotificationResponse *)response
         withCompletionHandler:(void (^)(void))completionHandler
{
  [RNCPushNotificationIOS didReceiveNotificationResponse:response];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
  // íŒŒì´ì–´ë² ì´ìŠ¤ ì´ˆê¸°ê°’ ì„¤ì •
  if ([FIRApp defaultApp] == nil) {
    [FIRApp configure];
  }

  self.moduleName = @"myappname";
  // ì•„ë˜ ì‚¬ì „ì— ì‚¬ìš©ì ì •ì˜ ì´ˆê¸° í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  // í”„ë¡œí¼í‹°ë“¤ì€ React Nativeì—ì„œ ì‚¬ìš©ë˜ëŠ” ViewControllerë¡œ ì „ë‹¬
  self.initialProps = @{};
  [super application:application didFinishLaunchingWithOptions:launchOptions];
  //ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦°
  [RNSplashScreen show];
  //íŒŒì´ì–´ë² ì´ìŠ¤ ë“±ë¡ ì„¤ì •
  //ì‚¬ìš©ì ì•Œë¦¼ ì„¼í„°
  UNUserNotificationCenter *center = [UNUserNotificationCenter currentNotificationCenter];
  center.delegate = self;

  return [super application:application didFinishLaunchingWithOptions:launchOptions];
}

//ì•Œë¦¼ì´ í¬ê·¸ë¼ìš´ë“œ ì•±ì— ì „ë‹¬ë  ë•Œ í˜¸ì¶œ.
-(void)userNotificationCenter:(UNUserNotificationCenter *)center willPresentNotification:(UNNotification *)notification withCompletionHandler:(void (^)(UNNotificationPresentationOptions options))completionHandler
{
  completionHandler(UNAuthorizationOptionSound | UNAuthorizationOptionAlert | UNAuthorizationOptionBadge);
}

- (NSURL *)sourceURLForBridge:(RCTBridge *)bridge
{
#if DEBUG
  return [[RCTBundleURLProvider sharedSettings] jsBundleURLForBundleRoot:@"index"];
#else
  //ê¸°ì¡´ bundle ì„¤ì •
	return [[NSBundle mainBundle] URLForResource:@"main" withExtension:@"jsbundle"];
  //code push bundle ì„¤ì •
#endif
}

@end
```

Podfile ìˆ˜ì •

```ruby
#Podfile

# íŒŒì´ì–´ë² ì´ìŠ¤ ì¶”ê°€
  pod 'FirebaseCore', :modular_headers => true
  # Add the Firebase pod for Google Analytics ì• ë„ë˜í‹±ìŠ¤
  pod 'FirebaseAnalytics'
  # Add the Firebase pod for message ë©”ì‹œì§€ì•Œë¦¼
  pod 'FirebaseMessaging'
```

## ğŸ”¥ 3. iOS í‘¸ì‹œë©”ì‹œì§€ í™œì„±í™”í•˜ê¸°

### 3-1 xcode ìˆ˜ì •í•˜ê¸°

- Signing & Capabilitiesì—ì„œ Background Modesì˜ **Background fetch** , **Remote notifications** **ì²´í¬**
- **ìš°ìƒë‹¨ +ë²„íŠ¼ í´ë¦­ í›„** **Push Notificationsë¥¼ í™œì„±í™”**

### 3-2 í‚¤ì²´ì¸ ë‹¤ìš´ë¡œë“œ

- macOSì—ì„œ í‚¤ì²´ì¸ì ‘ê·¼ â‡’ ì¸ì¦ì„œ ì§€ì› â‡’ ì¸ì¦ê¸°ê´€ì—ì„œ ì¸ì¦ì„œ ìš”ì²­ â‡’ ì´ë©”ì¼ ì…ë ¥í›„ ë””ìŠ¤í¬ì— ì €ì¥ë¨ , ë³¸ì¸ì´ í‚¤í˜ì–´ ì •ë³´ ì§€ì • â‡’ ì €ì¥í•˜ê¸°

### 3-3 APN key ë“±ë¡í•˜ê¸°

- **Key Name ì…ë ¥ í›„** â‡’ **Apple Push Notifications service (APNs) ì²´í¬**
  (https://developer.apple.com/account/resources/authkeys/add)

## ğŸ”¥ 4. Firebase í”„ë¡œì íŠ¸ ì„¤ì •

### 4-1 APN ì¸ì¦í‚¤ Firebaseì— ë“±ë¡í•˜ê¸°

- Firebase í”„ë¡œì íŠ¸ ì„¤ì • â‡’ í´ë¼ìš°ë“œ ë©”ì‹œì§• íƒ­ â‡’ Apple ì•± êµ¬ì„± í•­ëª©ì—ì„œ APN ì¸ì¦ í‚¤ ex) AuthKey_sfdfsdfd!!.p8 íŒŒì¼ ë“±ë¡
- í‚¤ ID ë“±ë¡ 3-4ì—ì„œ ë“±ë¡í–ˆë˜ APN í‚¤ IDë¥¼ ì…ë ¥
- íŒ€ IDëŠ” Apple Member Centerì— ë©¤ë²„ì‹­ ë“±ë¡ì„ í•˜ë©´ í™•ì¸í•  ìˆ˜ ìˆìŒ

### 4-2 Identifiers ìƒì„±í•˜ê¸°

- Identifiers ìƒì„± APP IDs â‡’ App â‡’ Bundle ID â‡’ Push Notifications Editì—ì„œ CertificateSigningRequestì„ ë“±ë¡í•´ì¤€ë‹¤
  (https://developer.apple.com/account/resources/identifiers/list)

## ğŸ”¥ 5. Xcodeì—ì„œ GoogleService-Info.plist ë“±ë¡í•˜ê¸°

IOS ë£¨íŠ¸ ê²½ë¡œì— GoogleService-Info.plistì„ ë“±ë¡

ì°¸ì¡°

[React Native Firebase | React Native Firebase](https://rnfirebase.io/)

https://github.com/react-native-push-notification/ios
