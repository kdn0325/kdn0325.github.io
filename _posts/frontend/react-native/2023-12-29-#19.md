---
title: "[React Native] Google Login (firebase)"

categories: frontend

comments: true
tags:
  - React-Native
  - reactnative
  - ì‚¬ì „ ì‘ì—…
  - Android
  - IOS
  - google-service.json
  - GoogleService-info.plist
  - Firebase SDK
  - êµ¬ê¸€ ë¡œê·¸ì¸
  - firebase êµ¬ê¸€ ë¡œê·¸ì¸
  - sha-1 ì¸ì¦ì„œ ì§€ë¬¸
  - URL Schemes
  - REVERSED_CLIENT_ID
  - react-native-google-login

date: 2023-12-29
last_modified_at: 2023-12-29
---

---

<!-- prettier-ignore -->
* this ordered seed list will be replaced by the toc 
{:toc}

## **ğŸ”¥ 1.  ì‚¬ì „ ì‘ì—…**


- react nativeì—ì„œ firebase ì…‹íŒ… ìš°ì„ ì ìœ¼ë¡œ ì„¤ì¹˜ ë˜ì–´ì•¼í•¨

```bash
npm install --save @react-native-firebase/app

or

yarn add @react-native-firebase/app
```

---

## **ğŸ”¥ 2.  Android**

### 1. ****ì•± ë“±ë¡****

<img width="500" alt="1" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/c78ea28d-3568-4b0e-9e54-ec621748899c">

- ë‚´ê°€ ì„¤ì¹˜ í•  ë• ë””ë²„ê·¸ ì„œëª… ì¸ì¦ì´ ìˆì–´ì•¼ ë¡œê·¸ì¸ì´ ëë‹¤ (ìš°ì„  ì„œëª… ì¸ì¦ì€ ë‚˜ì¤‘ì— í•´ë„ ìƒê´€ì—†ìŒ)

---

### ****2. google-service.json ì¶”ê°€****

- **`android/app/s`rc**

<img width="500" alt="2" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/0f8a9c2a-0a5d-4408-8714-6892e151b16e">

---

### ****3. FirebaseÂ SDKÂ ì¶”ê°€****

- **`android/app/src/build.gradle`**

<img width="500" alt="3" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/a4415630-676b-48eb-af00-27418823128b">

---

## **ğŸ”¥ 3.  IOS**

### 1. ****ì•± ë“±ë¡****

<img width="500" alt="4" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/8ab39894-f265-49e8-9f35-693a2b00e615">

---

### ****2. GoogleService-info.plist ì¶”ê°€****

- `/ios` ê²½ë¡œ
- IDEë¡œ ì§ì ‘ ë„£ëŠ”ê²ƒë³´ë‹¤ Xcodeì—ì„œ ì¶”ê°€í•˜ëŠ”ê²Œ ì •ì‹  ê±´ê°•ì— ì´ë¡­ë‹¤

```yaml
<key>NSAppTransportSecurity</key>
<dict>
    <key>NSAllowsArbitraryLoads</key> //  ì¶”ê°€
    <true/>                           //  ì¶”ê°€
    <key>NSExceptionDomains</key>
    <dict>
        <key>localhost</key>
        <dict>
            <key>NSExceptionAllowsInsecureHTTPLoads</key>
            <true/>
        </dict>
    </dict>
</dict>
```

---

### 3. FirebaseÂ SDK ì¶”ê°€

- `ios/podfile`

<img width="500" alt="5" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/b73aee21-7e6c-434e-bfbe-ebb453e9c057">

- `ios/podfile`

<img width="500" alt="6" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/4ec6d1e6-0ec8-4f6c-964e-06941bd53fdf">

- **cocoapod ì´ˆê¸°í™” ì½”ë“œ ì¶”ê°€**
- `ios/APP_NAME/AppDelegate.mm`

<img width="500" alt="7" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/a26d10fc-ce6b-44cd-a064-554013009283">

---





## **ğŸ”¥ 4.  êµ¬ê¸€ ë¡œê·¸ì¸ í™œì„±í™”**

```bash
npm i @react-native-google-signin/google-signin

or

yarn add @react-native-google-signin/google-signin
```

---

### 1  firebase êµ¬ê¸€ ë¡œê·¸ì¸ í™œì„±í™”**

- **IOS/AOS ì‚¬ìš©í•  í”Œë«í¼ ì•± í™œì„±í™”**

<img width="500" alt="8" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/873c732e-a2d9-47f8-b355-3d299f76d116">

---





### 2.  Android êµ¬ê¸€ ë¡œê·¸ì¸ í™œì„±í™”

- `cd/android`
- **sha-1 ì¸ì¦ì„œ ì§€ë¬¸ êµ¬í•˜ê¸°**

```bash

./gradlew signingReport
```

<img width="500" alt="9" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/f249d959-a29f-4a9f-8890-14c169d8b733">

- **ë””ì§€í„¸ ì§€ë¬¸ ì¶”ê°€**

<img width="500" alt="10" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/fa9875b9-3c39-4a32-adc6-60a7cff63005">

---

### 3.  IOS êµ¬ê¸€ ë¡œê·¸ì¸ í™œì„±í™”

- **URL Schemesì—Â REVERSED_CLIENT_IDÂ ë“±ë¡**
- **REVERSED_CLIENT_IDëŠ” firebaseì—°ë™ì‹œ ë°›ì•˜ë˜ GoogleService-Info.plistì— ìˆë‹¤**

<img width="500"  alt="11" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/554c1f7b-5df3-4154-8499-dbbbab58543a">

---

## ğŸ”¥ 5.  RN ì½”ë“œ ì‘ì„±

- **webClientIdëŠ” google-services.json íŒŒì¼ì— **client_type 3**ì˜ client_idê°’ì´ë‹¤**

```tsx
function Login({
  navigation,
}: NativeStackScreenProps<RootStackParamList>): JSX.Element {
  const onPressGoogleBtn = async () => {
    try {
      GoogleSignin.configure({
        //webClientId is required if you need offline access
        offlineAccess: true,
        webClientId: `${Config.GOOGLE_CLIENT_ID}`,

        scopes: ['profile', 'email'],
      });
      await GoogleSignin.hasPlayServices();
      const user = await GoogleSignin.signIn();
      console.log(user);
    } catch (e) {
      console.log('ì—ëŸ¬', e);
    }

    // const googleCredential = auth.GoogleAuthProvider.credential(idToken);
    // const res = await auth().signInWithCredential(googleCredential);
  };

  return (
    <GoogleSigninButton
      onPress={onPressGoogleBtn}
      style={defaultButtonStyle.button}
      size={GoogleSigninButton.Size.Wide}
    />
  );
}

export default Login;
```
## ğŸ”¥ 6.  ê²°ê³¼

<img width="500" alt="result1" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/1e98150b-6866-4e42-aae8-8c893ce51831">
<img width="500" alt="result2" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/0fd0ad4a-fb2f-4b5b-af91-fdec80bc3c08">
<img width="500" alt="result3" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/5b16a967-e225-441e-b8b9-e2792d811bc4">
<img width="500" alt="image1" src="https://github.com/kdn0325/kdn0325.github.io/assets/91298955/50071888-a3c5-4d91-8a16-0f5207cc6aa8">


## ì°¸ê³ 

- IOSëŠ” Xcodeì—ì„œ ì‘ì—… í•˜ëŠ”ê²Œ ì¢‹ë‹¤
- sdk ì¶”ê°€ ì‹œ pod install í•„ìˆ˜
