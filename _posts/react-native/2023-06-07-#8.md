---
title: "[React Native] Native Module ìƒì„±"

categories:
  - react-native
tags:
  - [
      React-Native,
      android,
      ios,
      Objective-C,
      Swift,
      kotlin,
      IOS ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ,
      Android ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ,
    ]

author_profile: true
toc: true
toc_sticky: true

date: 2023-06-08
last_modified_at: 2023-06-08
---

# ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆì´ë€

React Nativeì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” Android,IOS ë§Œì˜ ì „ìš© ê¸°ëŠ¥ì„ ê°€ì§„ ì½”ë“œ

## ğŸš— Android ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆë§Œë“¤ê¸° ( Java )

Android Studio > ReactNative í”„ë¡œì íŠ¸ / android í´ë” ì—´ê¸°

### 1. ëª¨ë“ˆ í´ë˜ìŠ¤ ë§Œë“¤ê¸°

### 2. ReactNativeì— ì—°ê²°í•  íŒ¨í‚¤ì§€ ë§Œë“¤ê¸°

### 3. ë§Œë“  íŒ¨í‚¤ì§€ ë“±ë¡í•˜ê¸°

```java
Copy
// app/java/com.nativemoduleworkshop/pakagename.java
package com.pakagename.newarchitecture;

import android.app.Application;
import androidx.annotation.NonNull;
import com.facebook.react.PackageList;
import com.facebook.react.ReactInstanceManager;
import com.facebook.react.ReactNativeHost;
import com.facebook.react.ReactPackage;
import com.facebook.react.ReactPackageTurboModuleManagerDelegate;
import com.facebook.react.bridge.JSIModulePackage;
import com.facebook.react.bridge.JSIModuleProvider;
import com.facebook.react.bridge.JSIModuleSpec;
import com.facebook.react.bridge.JSIModuleType;
import com.facebook.react.bridge.JavaScriptContextHolder;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.UIManager;
import com.facebook.react.fabric.ComponentFactory;
import com.facebook.react.fabric.CoreComponentsRegistry;
import com.facebook.react.fabric.EmptyReactNativeConfig;
import com.facebook.react.fabric.FabricJSIModuleProvider;
import com.facebook.react.fabric.ReactNativeConfig;
import com.facebook.react.uimanager.ViewManagerRegistry;

//ReactNative Java ëª¨ë“ˆ ìƒì†
import com.pakagename.BuildConfig;
import com.pakagename.newarchitecture.components.MainComponentsRegistry;
import com.pakagename.newarchitecture.modules.MainApplicationTurboModuleManagerDelegate;
import java.util.ArrayList;
import java.util.List;
// ReactNativeì— ë“±ë¡í•  íŒ¨í‚¤ì§€ë¥¼ ë§Œë“¤ê¸°

/**
 * A {@link ReactNativeHost} that helps you load everything needed for the New Architecture, both
 * TurboModule delegates and the Fabric Renderer.
 *
 * <p>Please note that this class is used ONLY if you opt-in for the New Architecture (see the
 * `newArchEnabled` property). Is ignored otherwise.
 */
public class MainApplicationReactNativeHost extends ReactNativeHost {
  public MainApplicationReactNativeHost(Application application) {
    super(application);
  }

  @Override
  public boolean getUseDeveloperSupport() {

  /*
        íŒ¨í‚¤ì§€ë¥¼ ë°›ì•„ì˜¤ëŠ” ë¶€ë¶„
         */
    return BuildConfig.DEBUG;
  }

  @Override
  protected List<ReactPackage> getPackages() {
    List<ReactPackage> packages = new PackageList(this).getPackages();
    // Packages that cannot be autolinked yet can be added manually here, for example:
    //     packages.add(new MyReactNativePackage());
    // TurboModules must also be loaded here providing a valid TurboReactPackage implementation:
    //     packages.add(new TurboReactPackage() { ... });
    // If you have custom Fabric Components, their ViewManagers should also be loaded here
    // inside a ReactPackage.
    return packages;
  }

  @Override
  protected String getJSMainModuleName() {
    return "index";
  }

  @NonNull
  @Override
  protected ReactPackageTurboModuleManagerDelegate.Builder
      getReactPackageTurboModuleManagerDelegateBuilder() {
    // Here we provide the ReactPackageTurboModuleManagerDelegate Builder. This is necessary
    // for the new architecture and to use TurboModules correctly.
    return new MainApplicationTurboModuleManagerDelegate.Builder();

  }

  @Override
  protected JSIModulePackage getJSIModulePackage() {
    return new JSIModulePackage() {
      @Override
      public List<JSIModuleSpec> getJSIModules(
          final ReactApplicationContext reactApplicationContext,
          final JavaScriptContextHolder jsContext) {
        final List<JSIModuleSpec> specs = new ArrayList<>();

        //  @ReactMethod ë¥¼ ë¶™ì—¬ì£¼ë©´,
        // ì´í›„ js ì½”ë“œì—ì„œ í˜¸ì¶œ í•  ìˆ˜ ìˆë‹¤.

        // Here we provide a new JSIModuleSpec that will be responsible of providing the
        // custom Fabric Components.
        specs.add(
            new JSIModuleSpec() {
              @Override
              public JSIModuleType getJSIModuleType() {
                return JSIModuleType.UIManager;
              }

              @Override
              public JSIModuleProvider<UIManager> getJSIModuleProvider() {
                final ComponentFactory componentFactory = new ComponentFactory();
                CoreComponentsRegistry.register(componentFactory);

                // Here we register a Components Registry.
                // The one that is generated with the template contains no components
                // and just provides you the one from React Native core.
                MainComponentsRegistry.register(componentFactory);

                final ReactInstanceManager reactInstanceManager = getReactInstanceManager();

                ViewManagerRegistry viewManagerRegistry =
                    new ViewManagerRegistry(
                        reactInstanceManager.getOrCreateViewManagers(reactApplicationContext));

                return new FabricJSIModuleProvider(
                    reactApplicationContext,
                    componentFactory,
                    ReactNativeConfig.DEFAULT_CONFIG,
                    viewManagerRegistry);
              }
            });
        return specs;
      }
    };
  }
}
```

### ì—°ê²°í•œ íŒ¨í‚¤ì§€ ì‚¬ìš©í•˜ê¸°

```java
Copy
// í”„ë¡œì íŠ¸/App.js
import { NativeModules } from 'react-native'
const App = () => {
	const { ToastModule } = NativeModules;
    ToastModule.show('Hello Module!', ToastModule.SHORT);
	return ...
}

```

## ğŸš— ì½”í‹€ë¦°ìœ¼ë¡œ ë§Œë“¤ê¸°

### React Native í”„ë¡œì íŠ¸ ì½”í‹€ë¦°ìœ¼ë¡œ ë³€ê²½í•˜ê¸°

> í”„ë¡œì íŠ¸ / android / build.gradle íŒŒì¼ ìˆ˜ì •

```kotlin
Copy
...
buildscript {
  ext {
    buildToolsVersion = "31.0.0"
    minSdkVersion = 21
    compileSdkVersion = 31
    targetSdkVersion = 31
    kotlinVersion = "1.5.0" // ì½”í‹€ë¦° ì¶”ê°€
    ...
  }

  ...

  dependencies {
    classpath("com.android.tools.build:gradle:7.1.1")
    classpath("com.facebook.react:react-native-gradle-plugin")
    classpath("de.undercouch:gradle-download-task:5.0.1")
    // ì½”í‹€ë¦° ì¶”ê°€
    classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion")
    ...
  }
  ...
}

```

> í”„ë¡œì íŠ¸ / android / app / build.gradle íŒŒì¼ ìˆ˜ì •

```kotlin
Copy
...
dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlinVersion"
    ...
}
// ë§¨ ë§ˆì§€ë§‰ ì¤„ ì•„ë˜ì— ì‘ì„±
apply plugin: 'kotlin-android'

```

### ëª¨ë“ˆ ë§Œë“¤ê¸°

```kotlin
Copy
// í”„ë¡œì íŠ¸/app/java/com.nativemoduleworkshop/BrightnessModule.kt
package com.nativemoduleworkshop
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.bridge.ReactContextBaseJavaModule
import com.facebook.react.bridge.ReactMethod
// ReactContext ëª¨ë“ˆ ìƒì† ë°›ê¸° ( ì½”í‹€ë¦° ë°©ì‹ )
class BrightnessModule(reactContext: ReactApplicationContext) :
    ReactContextBaseJavaModule(reactContext) {
    // ëª¨ë“ˆ ì´ë¦„ ì§€ì •
    override fun getName(): String {
        return "BrightnessModule"
    }
    // ìƒìˆ˜ ë‚´ë³´ë‚´ê¸°
    override fun getConstants(): MutableMap<String, Any>? {
        val constants = HashMap<String, Any>()
        constants.put("SAMPLE_VALUE", "Hello World")
        return constants;
    }
    // ëª¨ë“ˆì—ì„œ ì‚¬ìš©í•  ë©”ì„œë“œ ì •ì˜
    @ReactMethod
    fun getBrightness(){
    }
    @ReactMethod
    fun setBrightness(brightness: Float){
    }
}

```

### íŒ¨í‚¤ì§€ ë§Œë“¤ê¸°

```kotlin
Copy
import com.facebook.react.ReactPackage
import com.facebook.react.bridge.NativeModule
import com.facebook.react.bridge.ReactApplicationContext
import com.facebook.react.uimanager.ReactShadowNode
import com.facebook.react.uimanager.ViewManager
import java.util.Collections
import kotlin.collections.ArrayList
class BrightnessPackage : ReactPackage {
    // ëª¨ë“ˆ ë“±ë¡
    override fun createNativeModules(reactContext: ReactApplicationContext): MutableList<NativeModule> {
        val modules = ArrayList<NativeModule>()
        modules.add(BrightnessModule(reactContext))
        return modules;
    }
    // ë„¤ì´í‹°ë¸Œ UI ì»´í¬ë„ŒíŠ¸ ë“±ë¡
    override fun createViewManagers(reactContext: ReactApplicationContext): MutableList<ViewManager<*, ReactShadowNode<*>>> {
        return Collections.emptyList();
    }
}

```

### íŒ¨í‚¤ì§€ ë“±ë¡í•˜ê¸°

> Javaì™€ ë™ì¼í•œ ë°©ë²•ìœ¼ë¡œ íŒ¨í‚¤ì§€ ë“±ë¡í•˜ê¸°

```kotlin
Copy
// app/java/com.nativemoduleworkshop/MainApplication.java
public class MainApplication extends Application implements ReactApplication {
  private final ReactNativeHost mReactNativeHost =
      new ReactNativeHost(this) {
        @Override
        public boolean getUseDeveloperSupport() { ... }
        /*
        íŒ¨í‚¤ì§€ë¥¼ ë°›ì•„ì˜¤ëŠ” ë¶€ë¶„
         */
        @Override
        protected List<ReactPackage> getPackages() {
          @SuppressWarnings("UnnecessaryLocalVariable")
          List<ReactPackage> packages = new PackageList(this).getPackages();

          // toast íŒ¨í‚¤ì§€ ì¶”ê°€
          packages.add(new ToastPackage());
          // Brightness íŒ¨í‚¤ì§€ ì¶”ê°€
          packages.add(new BrightnessPackage());
          return packages;
        }
        @Override
        protected String getJSMainModuleName() { ... }
      };

      ...
}

```

---

## ğŸš— IOS ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆë§Œë“¤ê¸° ( Objective.c )

XCode > ReactNative í”„ë¡œì íŠ¸ / ios / í”„ë¡œì íŠ¸.xcworkspace ì—´ê¸°

### Header File ìƒì„±

> í”„ë¡œì íŠ¸ / í”„ë¡œì íŠ¸ í´ë” ìš°í´ë¦­ > New FIle > Header File

### Header File ì‘ì„±, ì €ì¥

```java
Copy
// RCTBridgeModule í—¤ë”íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
#import <React/RCTBridgeModule.h>
// js í˜¸ì¶œ ê°€ëŠ¥í•œ ë©”ì„œë“œ ë§Œë“¤ê¸° ìœ„í•œ í—¤ë”íŒŒì¼
#import <UIKit/UIKit.h>
// RCTBridgeModule ê°ì²´ë¥¼, RCTAlertModuleë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•˜ê² ë‹¤.
@interface RCTAlertModule : NSObject <RCTBridgeModule>
@end

```

### Objective.c File ìƒì„±

> í”„ë¡œì íŠ¸ / í”„ë¡œì íŠ¸ í´ë” ìš°í´ë¦­ > New FIle > Objective.c File

### Objective.c File ì‘ì„±, ì €ì¥

```swift
Copy
 ,/// RCTAlertModule.m
// í—¤ë”íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
#import "RCTAlertModule.h"
// í—¤ë”íŒŒì¼ì—ì„œ ì‘ì„±í•œ RCTAlertModule ìƒì† ë°›ê¸°
@implementation RCTAlertModule
/* ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ ë‚´ë³´ë‚´ëŠ” ë©”ì„œë“œ
 ì¸ìë¡œ ëª¨ë“ˆì˜ ì´ë¦„ì„ ì§€ì •í•œë‹¤.
 ì¸ìë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´, í´ë˜ìŠ¤ ì´ë¦„ì—ì„œ RCTë¥¼ ì œì™¸í•œ ë¶€ë¶„ì„ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤ (AlertModule)
 ì¸ìë¥¼ ë¬¸ìì—´ ""ë¡œ ì§€ì •í•˜ì§€ ë§ê²ƒ!
*/
RCT_EXPORT_MODULE();
// jsì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•œ ë©”ì„œë“œ ë§Œë“¤ê¸°
RCT_EXPORT_METHOD(alert:(NSString *)message)
{
  UIAlertController* alert = [UIAlertController alertControllerWithTitle:@"My Alert"message:@"This is an alert." preferredStyle:UIAlertControllerStyleAlert];

  UIAlertAction* defaultAction = [UIAlertAction actionWithTitle:@:"OK" style:UIAlertActionStyleDefault handler:^(UIAlertAction * action) {}];

  [alert addAction:defaultAction];

  UIViewController *rootViewController = [UIApplication sharedApplication].delegate.window.rootViewController;

  // UIê´€ë ¨ ì‘ì—…ì„ mainìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
  dispatch_async(dispatch_get_main_queue(), ^{
    [rootViewController presentViewController:alert animated:YES completion:nil]
  })
}
// ìƒìˆ˜ ë‚´ë³´ë‚´ê¸°
- (NSDictionary *)constantsToExport
{
  return @{
    @"STRING_VALUE": @"Hello World",
    @"NUMBER_VALUE": @(15)
  };
}
// ëª¨ë“ˆì´ js ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì—, mainìŠ¤ë ˆë“œì—ì„œ ìƒìˆ˜ ì´ˆê¸°í™” í•˜ê¸°
+ (BOOL)requiresMainQueueSetup
{
  return YES;
}
@end

```

### ëª¨ë“ˆ ì‚¬ìš©í•˜ê¸°

```swift
Copy
// í”„ë¡œì íŠ¸/App.js
import { NativeModules } from 'react-native'
const App = () => {
    const { AlertModule } = NativeModules;
    AlertModule.alert('Hello Module!');
    console.log(AlertModule.NUMBER_VALUE);
    return ...
}

```

## ğŸš— Swiftë¡œ ë§Œë“¤ê¸°

XCode > ReactNative í”„ë¡œì íŠ¸ / ios / í”„ë¡œì íŠ¸.xcworkspace ì—´ê¸°

### Swift File ìƒì„±

> í”„ë¡œì íŠ¸ / í”„ë¡œì íŠ¸ í´ë” ìš°í´ë¦­ > New FIle > Swift File

### Create Bridging Header ìƒì„± ( ë²„íŠ¼ í´ë¦­ )

```swift
Copy
// NativeModuleWorkshop-Bridging-Header.h
#import "React/RCTBridgeModule.h"

```

### SwiftÂ File ì‘ì„±, ì €ì¥

```swift
Copy
dfsdf

```
